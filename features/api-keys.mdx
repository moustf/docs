---
title: 'API Keys'
description: 'Generate, manage, and secure API keys for programmatic access to the platform'
---

## Overview

API keys provide secure authentication for programmatic access to the Hamsa platform. Use API keys to make outbound calls, retrieve call history, manage agents, and integrate with your applications. Each key is unique to your project and can be configured with expiration dates for enhanced security.

<Info>
**Key Features:**
- **Secure Authentication** - Token-based access to platform APIs
- **Expiration Control** - Set expiration dates or create keys that never expire
- **Easy Management** - Create, view, edit, and revoke keys from the dashboard
- **Project Scoped** - Each key is tied to a specific project
- **Activity Tracking** - Monitor when keys were created and last used
</Info>

## How It Works

API keys enable secure communication with the platform:

1. **Generate** - Create a new API key with optional expiration
2. **Copy** - Securely store the key in your application
3. **Authenticate** - Include the key in API request headers
4. **Use** - Make API calls to manage agents, calls, and data
5. **Monitor** - Track usage and manage active keys
6. **Rotate** - Regularly update keys for security

<Warning>
**Important:** API keys are shown only once when created. Store them securely immediately. If you lose a key, you'll need to generate a new one.
</Warning>

## Creating API Keys

### Generate a New Key

Create an API key from the dashboard:

1. Navigate to **API Keys** page
2. Click **Create API Key** button
3. Enter a descriptive **name** for the key
4. Choose expiration settings:
   - **Set Expiration Date** - Select a specific date
   - **No Expiry Date** - Key remains valid indefinitely
5. Click **Create**
6. **Copy the key immediately** - it won't be shown again

<CodeGroup>
```json API Key Creation Request
{
  "name": "Production API Key",
  "expiredAt": "2025-12-31T23:59:59.999Z",
  "projectId": "your-project-id"
}
```

```json No Expiry Key
{
  "name": "Development Key",
  "noExpiry": true,
  "projectId": "your-project-id"
}
```

</CodeGroup>

### API Key Format

Generated API keys follow this format:

```
sk_live_<32_character_random_string>
```

**Structure:**

- Prefix: `sk_` (secret key)
- Environment: `live_` or `test_`
- Random string: 32+ characters (cryptographically secure)

### Naming Best Practices

Use clear, descriptive names to identify key purposes:

```
âœ… Good Names:
- "Production API - Main Application"
- "Development Environment - Testing"
- "CI/CD Pipeline - Automated Tests"
- "Mobile App - iOS Production"
- "Webhook Integration - CRM Sync"

âŒ Bad Names:
- "Key 1"
- "Test"
- "My Key"
- "abc123"
```

**Recommended Naming Convention:**

```
[Environment] - [Application/Service] - [Purpose]

Examples:
- "Production - Web App - Outbound Calls"
- "Staging - Mobile App - Call History"
- "Development - Integration Tests - All Features"
```

## Managing API Keys

### Viewing API Keys

Access your API keys:

1. Navigate to **API Keys** page
2. View list of all keys with:
   - **Name** - Key identifier
   - **Value** - Masked key (click to reveal)
   - **Created At** - When the key was generated
   - **Expires At** - Expiration date (if set)

**Table View:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Name                       â”‚ Value                â”‚ Created At          â”‚ Expires At          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Production API Key         â”‚ sk_live_****...****  â”‚ 2024-01-15 10:30    â”‚ 2025-12-31 23:59    â”‚
â”‚ Development Key            â”‚ sk_live_****...****  â”‚ 2024-01-10 09:15    â”‚ Never               â”‚
â”‚ CI/CD Pipeline             â”‚ sk_live_****...****  â”‚ 2024-01-05 14:22    â”‚ 2024-07-05 14:22    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Revealing API Keys

Show the full key value:

1. Locate the key in the list
2. Click the **Show key** icon (eye icon)
3. Key is revealed: `sk_live_your_key_here_xxxxx...`
4. Click **Hide key** to mask it again
5. Click **Copy** to copy to clipboard

<Warning>
Only reveal API keys when necessary. Be cautious of screen sharing or recording sessions when keys are visible.
</Warning>

### Editing API Keys

Update the name of an existing key:

1. Click the **Edit** icon (pencil) next to the key
2. Enter a new **name**
3. Click **Save**

<Note>
You can only change the key's name. To change expiration or other properties, you must create a new key.
</Note>

**API Request:**

```bash
curl -X PATCH https://api-dev.tryhamsa.com/v1/api-keys?projectId=YOUR_PROJECT_ID \
  -H "Authorization: Bearer YOUR_ADMIN_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "apiKeyId": "key-uuid",
    "name": "Updated Key Name"
  }'
```

### Deleting API Keys

Revoke an API key:

1. Click the **Delete** icon (trash) next to the key
2. Confirm the deletion in the dialog
3. Key is immediately revoked

<Warning>
**Deletion is immediate and permanent:**
- All requests using this key will fail immediately
- The key cannot be recovered
- Update your applications before deleting active keys
</Warning>

**Confirmation Dialog:**

```
Are you sure?

This action cannot be undone. This will permanently
delete the API key.

[Cancel]  [Delete]
```

## Using API Keys

### Authentication Header

Include your API key in the `Authorization` header:

```bash
Authorization: Bearer sk_live_your_api_key_here
```

### Making API Requests

**Example: Get Call History**

```bash
curl -X GET https://api-dev.tryhamsa.com/v1/calls \
  -H "Authorization: Bearer sk_live_your_key_here_xxxxx" \
  -H "Content-Type: application/json"
```

**Example: Create Agent**

```bash
curl -X POST https://api-dev.tryhamsa.com/v1/voice-agents \
  -H "Authorization: Bearer sk_live_your_key_here_xxxxx" \
  -H "Content-Type: application/json" \
  -d '{
    "agentName": "Customer Support",
    "preamble": "You are a helpful customer support agent.",
    "greetingMessage": "Hello! How can I help you today?",
    "voiceId": "voice-id-here"
  }'
```

**Example: Make Outbound Call**

```bash
curl -X POST https://api-dev.tryhamsa.com/v1/voice-agents/phone-number/call \
  -H "Authorization: Bearer sk_live_your_key_here_xxxxx" \
  -H "Content-Type: application/json" \
  -d '{
    "projectId": "your-project-id",
    "apiKey": "sk_live_your_key_here_xxxxx",
    "phoneNumber": "+14155552671",
    "toNumber": "+19175551234",
    "voiceAgentId": "agent-uuid"
  }'
```

### SDK Integration

**JavaScript/Node.js:**

```javascript
const HamsaSDK = require('@hamsa/sdk');

const hamsa = new HamsaSDK({
  apiKey: process.env.HAMSA_API_KEY, // sk_live_your_key_here_xxxxx
});

// Make an outbound call
async function makeCall() {
  const call = await hamsa.calls.create({
    phoneNumber: '+14155552671',
    toNumber: '+19175551234',
    voiceAgentId: 'agent-uuid',
    params: {
      customer_name: 'John Doe',
    },
  });

  console.log('Call ID:', call.id);
}
```

**Python:**

```python
from hamsa import HamsaClient
import os

# Initialize client
hamsa = HamsaClient(api_key=os.environ['HAMSA_API_KEY'])

# Make an outbound call
call = hamsa.calls.create(
    phone_number='+14155552671',
    to_number='+19175551234',
    voice_agent_id='agent-uuid',
    params={
        'customer_name': 'John Doe'
    }
)

print(f"Call ID: {call.id}")
```

**cURL:**

```bash
# Store in environment variable
export HAMSA_API_KEY="sk_live_your_key_here_xxxxx"

# Use in requests
curl -X GET https://api-dev.tryhamsa.com/v1/calls \
  -H "Authorization: Bearer $HAMSA_API_KEY"
```

## Security Best Practices

### Storage and Handling

<CardGroup cols={2}>
  <Card title="Use Environment Variables" icon="shield-check">
    Never hardcode keys in source code
  </Card>
  <Card title="Secure Storage" icon="vault">
    Use secret management tools
  </Card>
  <Card title="Restrict Access" icon="lock">
    Limit who can view and create keys
  </Card>
  <Card title="Regular Rotation" icon="rotate">
    Update keys periodically
  </Card>
</CardGroup>

### Environment Variables

**Never do this:**

```javascript
// âŒ Bad - hardcoded API key
const apiKey = 'sk_live_your_key_here_xxxxx';
const hamsa = new HamsaSDK({ apiKey });
```

**Do this instead:**

```javascript
// âœ… Good - environment variable
const apiKey = process.env.HAMSA_API_KEY;
const hamsa = new HamsaSDK({ apiKey });
```

**Setting environment variables:**

```bash
# Linux/Mac
export HAMSA_API_KEY="sk_live_your_key_here_xxxxx"

# Windows Command Prompt
set HAMSA_API_KEY=sk_live_your_key_here_xxxxx

# Windows PowerShell
$env:HAMSA_API_KEY="sk_live_your_key_here_xxxxx"

# .env file (with dotenv)
HAMSA_API_KEY=sk_live_your_key_here_xxxxx
```

### Secret Management Tools

Use dedicated tools for production:

**AWS Secrets Manager:**

```javascript
const AWS = require('aws-sdk');
const secretsManager = new AWS.SecretsManager();

async function getApiKey() {
  const secret = await secretsManager
    .getSecretValue({ SecretId: 'hamsa/api-key' })
    .promise();

  return JSON.parse(secret.SecretString).apiKey;
}

const apiKey = await getApiKey();
```

**HashiCorp Vault:**

```javascript
const vault = require('node-vault')({
  endpoint: 'http://vault:8200',
  token: process.env.VAULT_TOKEN,
});

async function getApiKey() {
  const result = await vault.read('secret/hamsa');
  return result.data.apiKey;
}
```

**Google Cloud Secret Manager:**

```python
from google.cloud import secretmanager

def get_api_key():
    client = secretmanager.SecretManagerServiceClient()
    name = "projects/PROJECT_ID/secrets/hamsa-api-key/versions/latest"
    response = client.access_secret_version(request={"name": name})
    return response.payload.data.decode("UTF-8")

api_key = get_api_key()
```

### Git Safety

Prevent accidental commits:

**.gitignore:**

```
# API Keys and secrets
.env
.env.local
.env.production
secrets.json
config/secrets.yml

# API key files
**/api-keys.txt
**/credentials.json
```

**Pre-commit Hook:**

```bash
#!/bin/sh
# .git/hooks/pre-commit

# Check for potential API keys
if git diff --cached | grep -E 'sk_live_[a-zA-Z0-9]{32,}'; then
  echo "ERROR: Potential API key found in staged changes!"
  echo "Please remove sensitive data before committing."
  exit 1
fi
```

### Key Rotation Strategy

Regularly rotate API keys:

**Rotation Process:**

1. **Create New Key** - Generate a replacement key
2. **Update Applications** - Deploy with new key (parallel with old)
3. **Monitor** - Verify all systems using new key
4. **Grace Period** - Run both keys for 24-48 hours
5. **Revoke Old Key** - Delete the old key
6. **Document** - Record rotation in change log

**Automation Example:**

```javascript
// Automated key rotation (quarterly)
const rotateApiKey = async () => {
  // Generate new key
  const newKey = await hamsa.apiKeys.create({
    name: `Production API Key - Q${getQuarter()} ${getYear()}`,
    expiredAt: getNextQuarterEnd(),
  });

  // Update secret manager
  await secretsManager.updateSecret({
    SecretId: 'hamsa/api-key',
    SecretString: JSON.stringify({
      apiKey: newKey.key,
      rotatedAt: new Date().toISOString(),
    }),
  });

  // Notify team
  await slack.sendMessage({
    channel: '#engineering',
    text: `ğŸ”‘ API key rotated. Old key will be revoked in 48 hours.`,
  });

  // Schedule old key deletion
  setTimeout(
    async () => {
      await hamsa.apiKeys.delete({ apiKeyId: oldKeyId });
    },
    48 * 60 * 60 * 1000,
  ); // 48 hours
};
```

### Monitoring and Alerts

Track API key usage:

```javascript
// Log API key usage
app.use((req, res, next) => {
  const apiKey = req.headers.authorization?.replace('Bearer ', '');

  if (apiKey) {
    logger.info('API Request', {
      keyPrefix: apiKey.substring(0, 10) + '...',
      endpoint: req.path,
      method: req.method,
      timestamp: new Date().toISOString(),
    });
  }

  next();
});

// Alert on suspicious activity
if (rateLimitExceeded || suspiciousPattern) {
  await alerting.send({
    severity: 'high',
    message: 'Unusual API key activity detected',
    details: {
      keyName: 'Production API Key',
      requests: requestCount,
      timeWindow: '1 hour',
    },
  });
}
```

## Expiration Management

### Setting Expiration Dates

Choose appropriate expiration based on use case:

| Use Case                    | Recommended Expiration      |
| --------------------------- | --------------------------- |
| **Production**              | 1 year, auto-rotate         |
| **Development**             | No expiry (rotate manually) |
| **CI/CD**                   | 3-6 months                  |
| **Testing**                 | 1 month                     |
| **Temporary Access**        | 1 week or less              |
| **Third-party Integration** | 6 months with review        |

### Expiration Reminders

Set up notifications for expiring keys:

```javascript
// Check for expiring keys (daily cron job)
const checkExpiringKeys = async () => {
  const keys = await hamsa.apiKeys.list();
  const thirtyDaysFromNow = new Date();
  thirtyDaysFromNow.setDate(thirtyDaysFromNow.getDate() + 30);

  const expiringKeys = keys.filter((key) => {
    if (!key.expiredAt) return false;
    const expirationDate = new Date(key.expiredAt);
    return expirationDate <= thirtyDaysFromNow;
  });

  if (expiringKeys.length > 0) {
    await email.send({
      to: 'engineering@company.com',
      subject: `${expiringKeys.length} API keys expiring soon`,
      template: 'expiring-keys',
      data: { keys: expiringKeys },
    });
  }
};
```

### Handling Expired Keys

When a key expires:

1. **Automatic Revocation** - Key stops working immediately at expiration time
2. **401 Unauthorized** - API requests return authentication error
3. **Grace Period** - Consider setting expiration for end of day (23:59:59)

**Error Response:**

```json
{
  "error": {
    "code": "AUTHENTICATION_FAILED",
    "message": "API key has expired",
    "details": {
      "expiredAt": "2024-12-31T23:59:59.999Z",
      "currentTime": "2025-01-01T10:30:00.000Z"
    }
  }
}
```

## Troubleshooting

### Authentication Errors

**Error:** 401 Unauthorized

**Common Causes:**

- Missing `Authorization` header
- Incorrect header format
- Expired API key
- Deleted/revoked API key
- Wrong API key for project

**Solution:**

```bash
# Verify header format
curl -v https://api-dev.tryhamsa.com/v1/calls \
  -H "Authorization: Bearer sk_live_your_key_here_xxxxx"

# Should see in output:
# > Authorization: Bearer sk_live_your_key_here_xxxxx

# Common mistakes:
âŒ -H "Authorization: sk_live_your_key_here_xxxxx"  # Missing "Bearer"
âŒ -H "API-Key: sk_live_your_key_here_xxxxx"        # Wrong header name
âŒ -H "Bearer: sk_live_your_key_here_xxxxx"         # Wrong format
```

---

### Key Not Working After Creation

**Problem:** Newly created key returns 401 errors

**Possible Causes:**

1. Typo when copying the key
2. Extra spaces in the key
3. Using wrong project
4. Network/firewall blocking requests

**Solution:**

```javascript
// Verify the key
const testKey = async (apiKey) => {
  try {
    const response = await fetch('https://api-dev.tryhamsa.com/v1/calls', {
      headers: {
        Authorization: `Bearer ${apiKey}`,
        'Content-Type': 'application/json',
      },
    });

    if (response.ok) {
      console.log('âœ… API key is valid');
    } else {
      console.log('âŒ API key is invalid:', response.status);
    }
  } catch (error) {
    console.log('âŒ Request failed:', error.message);
  }
};

// Test your key
testKey('sk_live_your_key_here_xxxxx');
```

---

### Cannot Create API Key

**Error:** "Failed to create API key"

**Common Causes:**

- Name is empty or whitespace only
- Missing project selection
- Reached key limit for project
- Permission issues

**Solution:**

1. Ensure name is not empty: `trim().length > 0`
2. Verify project ID is correct
3. Check if you have permission to create keys
4. Try deleting unused keys if at limit

```javascript
// Validate before creation
const validateKeyData = (data) => {
  if (!data.name || data.name.trim().length === 0) {
    throw new Error('Name is required');
  }

  if (!data.noExpiry && !data.expiredAt) {
    throw new Error('Must set expiration or check "No Expiry"');
  }

  if (!data.projectId) {
    throw new Error('Project ID is required');
  }

  return true;
};
```

---

### Lost API Key

**Problem:** Forgot to copy key when created

**Solution:**

Unfortunately, API keys are only shown once for security reasons. You must:

1. **Create a new API key**
2. **Update your applications** with the new key
3. **Delete the old key** you lost

**Prevention:**

```javascript
// Save to secure location immediately after creation
const createAndSaveKey = async (name) => {
  const key = await hamsa.apiKeys.create({ name });

  // Save to secure location
  await saveToVault({
    name: key.name,
    value: key.key,
    createdAt: key.createdAt,
  });

  // Also log for immediate reference
  console.log(`
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    New API Key Created
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    Name: ${key.name}
    Key:  ${key.key}

    âš ï¸  Save this key now! It won't be shown again.
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  `);

  return key;
};
```

## API Reference

### List API Keys

```http
GET /v1/api-keys?projectId={projectId}&skip={page}&take={pageSize}
```

**Response:**

```json
{
  "success": true,
  "message": "API keys retrieved successfully",
  "data": {
    "apiKeys": [
      {
        "id": "key-uuid-1",
        "name": "Production API Key",
        "expiredAt": "2025-12-31T23:59:59.999Z",
        "userId": "user-uuid",
        "createdAt": "2024-01-15T10:30:00.000Z",
        "updatedAt": "2024-01-15T10:30:00.000Z"
      }
    ],
    "total": 5,
    "filtered": 5
  }
}
```

### Create API Key

```http
POST /v1/api-keys?projectId={projectId}
```

**Request:**

```json
{
  "name": "New API Key",
  "expiredAt": "2025-12-31T23:59:59.999Z"
}
```

### Update API Key

```http
PATCH /v1/api-keys?projectId={projectId}
```

**Request:**

```json
{
  "apiKeyId": "key-uuid",
  "name": "Updated Name"
}
```

### Delete API Key

```http
DELETE /v1/api-keys?projectId={projectId}
```

**Request:**

```json
{
  "apiKeyId": "key-uuid",
  "name": "Key Name"
}
```

## Related Features

- [Webhooks](/features/webhooks) - Secure webhooks with API keys
- [Phone Numbers](/features/telephony) - Use API keys for outbound calls
- [Agents](/agents/introduction) - Programmatically manage agents
- [Call History](/dashboard/call-history) - Retrieve call data via API

## Need Help?

<CardGroup cols={2}>
  <Card title="API Documentation" icon="book" href="/api-reference">
    Complete API reference
  </Card>
  <Card title="Contact Support" icon="headset" href="mailto:support@tryhamsa.com">
    Get help with API keys
  </Card>
</CardGroup>
